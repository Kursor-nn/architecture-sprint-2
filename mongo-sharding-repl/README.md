# Описание

Шардирование сделано по описанию:
1. [офф документации](https://www.mongodb.com/docs/manual/tutorial/deploy-shard-cluster/#overview)
2. https://ankitkumarakt746.medium.com/mongodb-sharded-cluster-with-replica-set-in-docker-81322c903513


## Как запустить
1. Проверить, что Docker запущен
2. выполнить скрипт start_cluster.sh и дождаться его выполнения
3. выполнить скрипт drop_cluster.sh для очистки стека

## start_cluster.sh
Скрипт выполняет базовую конфигурацию, заполнение данных и проверку.
Порядок действий:
1) запуск стека
2) ожидание базовой инициализации
3) настройка config-server
4) настройка shard1 + replics
5) настройка shard2 + replics
6) настройка router
7) заполнение базы тестовыми данными
8) проверка количества данных через роутер.
Если стек поднят в первый раз и вольюмы не были еще созданы, то должно быть 1000 документов
9) проверка количества данных через shard1_1/shard1_2/shard1_3 и shard2_1/shard2_2/shard2_3/. 
Если стек поднят в первый раз и вольюмы не были еще созданы, то должно быть около 500 документов, а у реплик должны 
совпадать количество записей, то есть: 
a. count(shard1_1) == count(shard1_2) ==count(shard1_3)
b. count(shard2_1) == count(shard2_2) ==count(shard2_3)
10) проверка количества данных через rest api